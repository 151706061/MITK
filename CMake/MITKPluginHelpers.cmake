MACRO(MACRO_CREATE_MITK_PLUGIN)

  IF(KITNAME)
    INCLUDE_DIRECTORIES(${${KITNAME}_INCLUDE_DIRS})
  ELSE(KITNAME)
    INCLUDE_DIRECTORIES(${MITK_INCLUDE_DIRS})
  ENDIF(KITNAME)
  
  LINK_DIRECTORIES(${MITK_LINK_DIRECTORIES})
  
  MACRO_CREATE_PLUGIN()

  IF(MITK_FOUND)
    TARGET_LINK_LIBRARIES(${PLUGIN_TARGET} ${MITK_LIBRARIES})
  ELSE(MITK_FOUND)
    TARGET_LINK_LIBRARIES(${PLUGIN_TARGET} ${${KITNAME}_CORE_LIBRARIES})
  ENDIF(MITK_FOUND)

ENDMACRO(MACRO_CREATE_MITK_PLUGIN)


MACRO(MACRO_CREATE_QMITK_PLUGIN)

  IF(KITNAME)
    INCLUDE_DIRECTORIES(${Q${KITNAME}_INCLUDE_DIRS})
  ELSE(KITNAME)
    INCLUDE_DIRECTORIES(${QMITK_INCLUDE_DIRS})
  ENDIF(KITNAME)
  
  LINK_DIRECTORIES(${MITK_LINK_DIRECTORIES})
  
  MACRO_CREATE_QT_PLUGIN()

  IF(MITK_FOUND)
    TARGET_LINK_LIBRARIES(${PLUGIN_TARGET} ${QMITK_LIBRARIES})
  ELSE(MITK_FOUND)
    TARGET_LINK_LIBRARIES(${PLUGIN_TARGET} Qmitk)
  ENDIF(MITK_FOUND)

ENDMACRO(MACRO_CREATE_QMITK_PLUGIN)