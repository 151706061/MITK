#include <mitkDataTree.h>
#include <QmitkFunctionalityFactory.h>
#include <@FUNCTIONALITY_NAME@.h>

class QObject;
class QmitkStdMultiWidget;

@FUNCTIONALITY_EXPORT@ bool Register@FUNCTIONALITY_NAME@();
@FUNCTIONALITY_EXPORT@ QmitkFunctionality* Create@FUNCTIONALITY_NAME@Instance(QObject *parent, QmitkStdMultiWidget *mitkStdMultiWidget, mitk::DataTreeIteratorBase* dataIt); 

// 
// this works for dll's but not for static linkage
//
// extern "C" bool @FUNCTIONALITY_NAME@_dummy = Register@FUNCTIONALITY_NAME@();

bool Register@FUNCTIONALITY_NAME@()
{
  QmitkFunctionalityFactory::GetInstance().RegisterCreateFunctionalityCall("@FUNCTIONALITY_NAME@",Create@FUNCTIONALITY_NAME@Instance);
  return true;
}

QmitkFunctionality* Create@FUNCTIONALITY_NAME@Instance( QObject *parent, QmitkStdMultiWidget *mitkStdMultiWidget, mitk::DataTreeIteratorBase* dataIt) 
{
 @FUNCTIONALITY_NAME@* newInstance = new @FUNCTIONALITY_NAME@(parent,"@FUNCTIONALITY_NAME@",mitkStdMultiWidget,dataIt);
 return newInstance;
}


