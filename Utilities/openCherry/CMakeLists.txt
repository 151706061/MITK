INCLUDE(CMake/PluginHelpers.cmake)
INCLUDE(CMake/FindPoco.cmake)

IF(USE_QT AND DESIRED_QT_VERSION EQUAL 4)
  SET(QT_MT_REQUIRED 1)
  SET(BUILD_QT_PLUGINS 1)
  FIND_PACKAGE(Qt)
  
  INCLUDE(${QT_USE_FILE})
ENDIF(USE_QT AND DESIRED_QT_VERSION EQUAL 4)

OPTION(BUILD_ALL_OPENCHERRY_PLUGINS "Build all plugins (overriding selection)")
MARK_AS_ADVANCED(BUILD_ALL_OPENCHERRY_PLUGINS)

OPTION(OPENCHERRY_STATIC "Build all plugins as static libraries" OFF)
MARK_AS_ADVANCED(OPENCHERRY_STATIC)

SET(OPENCHERRY_PLUGIN_DIRS ""
    CACHE STRING "A comma-separated list of directories containing plugins")

FIND_POCO()

SET(OPENCHERRY_SOURCE_DIR ${CMAKE_CURRENT_SOURCE_DIR})

INCLUDE_DIRECTORIES(${POCO_INCLUDE_DIRS})

COLLECT_PLUGINS(${CMAKE_CURRENT_BINARY_DIR} OFF ${BUILD_ALL_OPENCHERRY_PLUGINS})
