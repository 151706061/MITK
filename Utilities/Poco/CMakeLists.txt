SET(CMAKE_DEBUG_POSTFIX d)

# POCO relies on the flags _DEBUG and NDEBUG to be set accordingly.
# These are Microsoft specific flags and not automatically defined by gcc or
# others, so we have to define them by ourselves.
IF(CMAKE_BUILD_TYPE-MODIFIED EQUAL 1)

  STRING(TOUPPER ${CMAKE_BUILD_TYPE} buildtype)
  IF(buildtype STREQUAL "DEBUG")
    SET(DEBUG_FLAG "-D_DEBUG")
  ELSE(buildtype STREQUAL "DEBUG")
    SET(DEBUG_FLAG "-DNDEBUG")
  ENDIF(buildtype STREQUAL "DEBUG")

ELSE(CMAKE_BUILD_TYPE-MODIFIED EQUAL 1)

  SET(DEBUG_FLAG "-D_DEBUG")

ENDIF(CMAKE_BUILD_TYPE-MODIFIED EQUAL 1)

SET(POCO_UNIX_COMPILE_FLAGS "-D_XOPEN_SOURCE=500 -D_REENTRANT -D_THREAD_SAFE -D_FILE_OFFSET_BITS=64 -D_LARGEFILE64_SOURCE ${DEBUG_FLAG}")

SET(Poco_BUILD_TESTSUITES OFF CACHE BOOL "Build the Poco testsuites")
MARK_AS_ADVANCED(Poco_BUILD_TESTSUITES)

ADD_SUBDIRECTORY(Foundation)
ADD_SUBDIRECTORY(XML)
ADD_SUBDIRECTORY(Util)

IF(Poco_BUILD_TESTSUITES)
  ADD_SUBDIRECTORY(CppUnit)
ENDIF(Poco_BUILD_TESTSUITES)

