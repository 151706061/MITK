INCLUDE(files.cmake)

ADD_LIBRARY(PocoFoundation ${CPP_FILES})
INSTALL(TARGETS PocoFoundation 
  RUNTIME DESTINATION bin
  LIBRARY DESTINATION lib
  ARCHIVE DESTINATION lib)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR}/include)

SET(POCO_FOUNDATION_COMPILE_FLAGS "")
IF(UNIX)
  SET(POCO_FOUNDATION_COMPILE_FLAGS "${POCO_FOUNDATION_COMPILE_FLAGS} ${POCO_UNIX_COMPILE_FLAGS}")
  IF(APPLE)
    TARGET_LINK_LIBRARIES(PocoFoundation dl)
  ELSE(APPLE)
    TARGET_LINK_LIBRARIES(PocoFoundation pthread dl rt)
  ENDIF(APPLE)
ELSEIF(WIN32)
  TARGET_LINK_LIBRARIES(PocoFoundation iphlpapi)
ENDIF(UNIX)

SET_TARGET_PROPERTIES(PocoFoundation PROPERTIES 
 DEFINE_SYMBOL Foundation_EXPORTS
 COMPILE_FLAGS "${POCO_FOUNDATION_COMPILE_FLAGS}"
)

IF(Poco_BUILD_TESTSUITES)
  ADD_SUBDIRECTORY(testsuite)
ENDIF(Poco_BUILD_TESTSUITES)
