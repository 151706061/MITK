FIND_PACKAGE(openCherry)

INCLUDE_DIRECTORIES(${OPENCHERRY_SOURCE_DIR} ${Poco_INCLUDE_DIRS})
LINK_DIRECTORIES(${Poco_LIBRARY_DIRS})
  
ADD_EXECUTABLE(MainApp MainApp.cpp)

TARGET_LINK_LIBRARIES(MainApp org_opencherry_osgi)

SET(OPENCHERRY_PLUGIN_BINARY_DIRS ${OPENCHERRY_PLUGIN_BINARY_DIRS} ${LIBRARY_OUTPUT_PATH}/Bundles)
SET(ODIN_PLUGIN_CACHE_DIR "${EXECUTABLE_OUTPUT_PATH}/plugin_cache")

CONFIGURE_FILE(MainApp.ini
               ${EXECUTABLE_OUTPUT_PATH}/MainApp.ini)

IF(WIN32)
  SET(MAINAPP_BUILD_TYPE debug)
  CONFIGURE_FILE(startMainApp.bat.in
               ${EXECUTABLE_OUTPUT_PATH}/startMainApp_${MAINAPP_BUILD_TYPE}.bat @ONLY)
  SET(MAINAPP_BUILD_TYPE release)
  CONFIGURE_FILE(startMainApp.bat.in
               ${EXECUTABLE_OUTPUT_PATH}/startMainApp_${MAINAPP_BUILD_TYPE}.bat @ONLY)
ENDIF(WIN32)
