INCLUDE_DIRECTORIES(${${KITNAME}_INCLUDE_DIRS})
IF(MITK_BUILD_SINGLE_CORE_LIB)
FOREACH(core ${CORE_DIRECTORIES})
  SET(CPP_FILES "")
  INCLUDE(${core}/files.cmake)
  FOREACH(cpp_file ${CPP_FILES})
  SET(ALL_FILES_CPP ${ALL_FILES_CPP} ${core}/${cpp_file})
  ENDFOREACH(cpp_file)
ENDFOREACH(core)
FIND_PACKAGE(OpenGL)
IF(NOT OPENGL_FOUND)
  MESSAGE("GL is required for MITK rendering")
ENDIF(NOT OPENGL_FOUND )
INCLUDE_DIRECTORIES(${OPENGL_INCLUDE_DIR})
INCLUDE_DIRECTORIES(${IPSEGMENTATION_INCLUDE_DIR} ${ANN_INCLUDE_DIR})
ADD_LIBRARY(mitkCore${LIBPOSTFIX} ${ALL_FILES_CPP})
TARGET_LINK_LIBRARIES(mitkCore${LIBPOSTFIX} ${LIBRARIES_FOR_${KITNAME}_CORE}  ${IPFUNC_LIBRARY} ipSegmentation ann)
TARGET_LINK_LIBRARIES(mitkCore pic2vtk IIL4MITK ${OPENGL_LIBRARIES} )
IF(MSVC_IDE)
TARGET_LINK_LIBRARIES(mitkCore psapi.lib)
ENDIF(MSVC_IDE)
ELSE(MITK_BUILD_SINGLE_CORE_LIB)
FOREACH(core ${CORE_DIRECTORIES})
ADD_SUBDIRECTORY(${core}) 
ENDFOREACH(core)
ENDIF(MITK_BUILD_SINGLE_CORE_LIB)
