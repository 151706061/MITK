<?xml version="1.0" encoding="utf-8" ?>
<!-- Event_Id = 0: this is a * transition with all other eventId's not declared in that state -->
<mitkInteraktionStates xmlns="http://tempuri.org/StateMachine.xsd" STYLE="User001">
	<!-- ***WARNING*** do not use any &, % and so on in NAME -->
	<stateMachine NAME="punctureApplication">
		<state NAME="start" ID="1" START_STATE="TRUE">
			<transition NAME="initialisiert" NEXT_STATE_ID="2" EVENT_ID="2001"> <!--EIDEDIT-->
				<action ID="3001">
					<intParam Name="Alter" Value="10" />
					<floatParam Name="groee" Value="190.5" />
					<stringParam Name="Beschreibung" Value="Das ist ein Text" />
				</action>
			</transition>
		</state>
		<state NAME="userInformation" ID="2">
			<transition NAME="edit objects" NEXT_STATE_ID="2" EVENT_ID="1013"> <!--EIDEDIT-->
				<action ID="3001">
					<intParam Name="Alter" Value="20" />
					<floatParam Name="groesse" Value="200.5" />
					<stringParam Name="Beschreibung" Value="Das ist ein zweiter Text" />
				</action>
				<action ID="3002">
					<intParam Name="Alter" Value="20" />
					<floatParam Name="groesse" Value="200.5" />
					<stringParam Name="Beschreibung" Value="Das ist ein zweiter Text" />
				</action>
			</transition>
		</state>
	</stateMachine>


        <!-- Application logic of Af-Navigation -->
	<stateMachine NAME="AFNavigation">
		<state NAME="started" ID="10010" START_STATE="TRUE">
			<transition NAME="importingData" NEXT_STATE_ID="10020" EVENT_ID="11010"> <!--EIDEDIT-->
				<action ID="12010">
				<stringParam Name="Beschreibung" Value="Das ist ein Text" />
				</action>
                              
			</transition>

	                <transition NAME="nextState" NEXT_STATE_ID="10020" EVENT_ID="11111"> <!--EIDEDIT-->
				<action ID="12010"></action>
			</transition>

		</state>

		<state NAME="dataImported" ID="10020">
			<transition NAME="segmentingData" NEXT_STATE_ID="10030" EVENT_ID="11020"> <!--EIDEDIT-->
				<action ID="12020">
				</action>
			</transition>

	                <transition NAME="nextState" NEXT_STATE_ID="10030" EVENT_ID="11111"> <!--EIDEDIT-->
				<action ID="12010"></action>
			</transition>
		</state>

		<state NAME="dataSegmented" ID="10030">
			<transition NAME="segmentingMesh" NEXT_STATE_ID="10040" EVENT_ID="11030"> <!--EIDEDIT-->
				<action ID="12030">
				</action>
			</transition>

	                <transition NAME="nextState" NEXT_STATE_ID="10040" EVENT_ID="11111"> <!--EIDEDIT-->
				<action ID="12010"></action>
			</transition>

		</state>


		<state NAME="meshSegmented" ID="10040">
			<transition NAME="defineLandmark" NEXT_STATE_ID="10050" EVENT_ID="11040"> <!--EIDEDIT-->
				<action ID="12040">
				</action>
			</transition>

	                <transition NAME="nextState" NEXT_STATE_ID="10050" EVENT_ID="11111"> <!--EIDEDIT-->
				<action ID="12010"></action>
			</transition>

		</state>

	        <state NAME="landmarksDefined" ID="10050">
			<transition NAME="segmentingAtrium" NEXT_STATE_ID="10060" EVENT_ID="11050"> <!--EIDEDIT-->
				<action ID="12050">
				</action>
			</transition>

	                <transition NAME="nextState" NEXT_STATE_ID="10060" EVENT_ID="11111"> <!--EIDEDIT-->
				<action ID="12010"></action>
			</transition>

		</state>

            	<state NAME="atriumSegmented" ID="10060">
			<transition NAME="planAblationLines" NEXT_STATE_ID="10070" EVENT_ID="11060"> <!--EIDEDIT-->
				<action ID="12060">
				</action>
			</transition>

	                <transition NAME="nextState" NEXT_STATE_ID="10070" EVENT_ID="11111"> <!--EIDEDIT-->
				<action ID="12010"></action>
			</transition>
		</state>

	        <state NAME="ablationLinesPlanned" ID="10070">
			<transition NAME="meshPositioning" NEXT_STATE_ID="10080" EVENT_ID="11070"> <!--EIDEDIT-->
				<action ID="12070">
				</action>
			</transition>

	                <transition NAME="nextState" NEXT_STATE_ID="10080" EVENT_ID="11111"> <!--EIDEDIT-->
				<action ID="12010"></action>
			</transition>
		</state>

                <state NAME="meshPositioned" ID="10080">
			<transition NAME="control" NEXT_STATE_ID="10010" EVENT_ID="11080"> <!--EIDEDIT-->
				<action ID="12080">
				</action>
			</transition>

	                <transition NAME="nextState" NEXT_STATE_ID="10010" EVENT_ID="11111"> <!--EIDEDIT-->
				<action ID="12010"></action>
			</transition>
		</state>
	</stateMachine>



	<!-- Behaviour the global statemachine -->
	<stateMachine NAME="global">
		<state NAME="neutral" ID="1" START_STATE="TRUE">
			<transition NAME="edit objects" NEXT_STATE_ID="2" EVENT_ID="1013"> <!--EIDEDIT-->
				<action ID="0" />
			</transition>
			<transition NAME="transmitt to all" NEXT_STATE_ID="1" EVENT_ID="0">
				<action ID="1200" />
				<action ID="1201" />
			</transition>
		</state>
		<state NAME="edit object" ID="2">
			<transition NAME="ready" NEXT_STATE_ID="1" EVENT_ID="1002"> <!--EIDFINISHED-->
				<action ID="0" />
			</transition>
			<transition NAME="transmitt to interactors only" NEXT_STATE_ID="2" EVENT_ID="0">
				<action ID="1201" />
			</transition>
		</state>
	</stateMachine>
	<stateMachine NAME="leftmouse">
		<state NAME="neutral" ID="1" START_STATE="TRUE">
			<transition NAME="send Koordinates" NEXT_STATE_ID="1" EVENT_ID="1" SIDE_EFFECT_ID="80">
				<action ID="80" />
			</transition>
			<transition NAME="send Koordinates Move" NEXT_STATE_ID="1" EVENT_ID="530" SIDE_EFFECT_ID="80">
				<action ID="80" />
			</transition>
		</state>
	</stateMachine>
	<stateMachine NAME="seedroi">
		<state NAME="neutral" ID="1" START_STATE="TRUE">
			<transition NAME="send Koordinates" NEXT_STATE_ID="1" EVENT_ID="3">
				<action ID="80" />
			</transition>
		</state>
	</stateMachine>
	<stateMachine NAME="navigation">
		<state NAME="neutral" ID="1" START_STATE="TRUE">
			<transition NAME="send Koordinates press" NEXT_STATE_ID="1" EVENT_ID="1">
				<action ID="90" />
			</transition>
			<transition NAME="send Koordinates move" NEXT_STATE_ID="1" EVENT_ID="530">
				<action ID="90" />
			</transition>
			<transition NAME="send Koordinates release" NEXT_STATE_ID="1" EVENT_ID="505">
				<action ID="42" />
			</transition>
		</state>
	</stateMachine>
	<stateMachine NAME="drag">
		<state NAME="neutral" ID="1" START_STATE="TRUE">
			<transition NAME="check picked" NEXT_STATE_ID="1" EVENT_ID="1">
				<action ID="80" />
			</transition>
			<transition NAME="continue" NEXT_STATE_ID="1" EVENT_ID="530">
				<action ID="90" />
			</transition>
			<transition NAME="exit" NEXT_STATE_ID="1" EVENT_ID="505">
				<action ID="42" />
			</transition>
		</state>
		<state NAME="picked guard" ID="2">
			<transition NAME="yes" NEXT_STATE_ID="3" EVENT_ID="204">
				<action ID="0" />
			</transition>
			<transition NAME="no" NEXT_STATE_ID="3" EVENT_ID="203">
				<action ID="0" />
			</transition>
		</state>
		<state NAME="move" ID="3">
			<transition NAME="continue" NEXT_STATE_ID="3" EVENT_ID="530">
				<action ID="90" />
			</transition>
			<transition NAME="exit" NEXT_STATE_ID="1" EVENT_ID="505">
				<action ID="42" />
			</transition>
		</state>
	</stateMachine>
	<stateMachine NAME="move">
		<state NAME="neutral" ID="1" START_STATE="TRUE">
			<transition NAME="send Koordinates" NEXT_STATE_ID="1" EVENT_ID="4">
				<action ID="1100" />
			</transition>
			<transition NAME="send Koordinates Move" NEXT_STATE_ID="1" EVENT_ID="533">
				<action ID="0" /> <!-- ???? zuvor 1102 modulo?? bitte nachschauen -->
			</transition>
		</state>
	</stateMachine>
	<stateMachine NAME="zoom">
		<state NAME="neutral" ID="1" START_STATE="TRUE">
			<transition NAME="send Koordinates" NEXT_STATE_ID="1" EVENT_ID="2">
				<action ID="1201" />
			</transition>
			<transition NAME="send Koordinates Move" NEXT_STATE_ID="1" EVENT_ID="531">
				<action ID="1202" />
			</transition>
		</state>
	</stateMachine>
	<stateMachine NAME="picking">
		<state NAME="neutral" ID="1" START_STATE="TRUE">
			<transition NAME="do picking" NEXT_STATE_ID="1" EVENT_ID="3">
				<action ID="1003" />
			</transition>
		</state>
	</stateMachine>
	<stateMachine NAME="focus">
		<state NAME="neutral" ID="1" START_STATE="TRUE">
			<transition NAME="changefocus" NEXT_STATE_ID="1" EVENT_ID="1">
				<action ID="0" />
			</transition>
		</state>
	</stateMachine>
	<stateMachine NAME="meshmove">
		<state NAME="neutral" ID="1" START_STATE="TRUE">
			<transition NAME="check picked" NEXT_STATE_ID="2" EVENT_ID="1">
				<action ID="30" />
			</transition>
		</state>
		<state NAME="picked guard" ID="2">
			<transition NAME="yes" NEXT_STATE_ID="3" EVENT_ID="204">
				<action ID="0" />
			</transition>
			<transition NAME="no" NEXT_STATE_ID="1" EVENT_ID="203">
				<action ID="0" />
			</transition>
		</state>
		<state NAME="move" ID="3">
			<transition NAME="continue" NEXT_STATE_ID="3" EVENT_ID="530">
				<action ID="90" />
			</transition>
			<transition NAME="exit" NEXT_STATE_ID="1" EVENT_ID="505">
				<action ID="666" />
			</transition>
		</state>
	</stateMachine>
	<!-- Behaviour of a set of Points. a defined number of points can be set/removed/selected/deselectd/moved -->
	<stateMachine NAME="pointsetinteractor">
		<state NAME="nopoints or loaded points" ID="1" START_STATE="TRUE">
			<transition NAME="addPoint but check n" NEXT_STATE_ID="3" EVENT_ID="3">
				<action ID="32" />
			</transition>
			<transition NAME="Select or move point Space" NEXT_STATE_ID="10" EVENT_ID="1">
				<action ID="30" />
			</transition>
			<transition NAME="checkn Delete" NEXT_STATE_ID="30" EVENT_ID="12">
				<action ID="33" />
			</transition>
		</state>
		<state NAME="space left" ID="2">
			<transition NAME="addPoint but check n" NEXT_STATE_ID="3" EVENT_ID="3">
				<action ID="32" />
			</transition>
			<transition NAME="Select or move point Space" NEXT_STATE_ID="10" EVENT_ID="1">
				<action ID="30" />
			</transition>
			<transition NAME="checkn Delete" NEXT_STATE_ID="30" EVENT_ID="12">
				<action ID="33" />
			</transition>
			<transition NAME="clear all" NEXT_STATE_ID="1" EVENT_ID="700">
				<action ID="130" />
			</transition>
		</state>
		<state NAME="checkedN" ID="3">
			<transition NAME="n smaller N" NEXT_STATE_ID="40" EVENT_ID="220">
				<action ID="37" />
			</transition>
			<transition NAME="n greater equals N" NEXT_STATE_ID="41" EVENT_ID="221">
				<action ID="37" />
			</transition>
		</state>
		<state NAME="set full" ID="4">
			<transition NAME="Select or move point FULL" NEXT_STATE_ID="20" EVENT_ID="1">
				<action ID="30" />
			</transition>
			<transition NAME="checkn Delete selected Point" NEXT_STATE_ID="30" EVENT_ID="12">
				<action ID="33" />
			</transition>
			<transition NAME="clear all" NEXT_STATE_ID="1" EVENT_ID="700">
				<action ID="130" />
			</transition>
		</state>
		<state NAME="picked NotFull" ID="10">
			<transition NAME="StNo" NEXT_STATE_ID="2" EVENT_ID="203">
				<action ID="72" />
			</transition>
			<transition NAME="StYes" NEXT_STATE_ID="11" EVENT_ID="204">
				<action ID="34" />
			</transition>
		</state>
		<state NAME="already selected Space" ID="11">
			<transition NAME="StNo" NEXT_STATE_ID="2" EVENT_ID="203">
				<action ID="60" />
			</transition>
			<transition NAME="StYes" NEXT_STATE_ID="12" EVENT_ID="204">
				<action ID="8" />
			</transition>
		</state>
		<state NAME="move Point Space" ID="12">
			<transition NAME="move point" NEXT_STATE_ID="12" EVENT_ID="530">
				<action ID="91" />
			</transition>
			<transition NAME="finish move" NEXT_STATE_ID="2" EVENT_ID="505">
				<action ID="42" />
			</transition>
			<transition NAME="Safety init" NEXT_STATE_ID="12" EVENT_ID="1"> -->
				<action ID="8" />
	    </transition>
		</state>
		<state NAME="picked Full" ID="20">
			<transition NAME="StNO" NEXT_STATE_ID="4" EVENT_ID="203">
				<action ID="72" />
			</transition>
			<transition NAME="StYES" NEXT_STATE_ID="21" EVENT_ID="204">
				<action ID="34" />
			</transition>
		</state>
		<state NAME="selected Full" ID="21">
			<transition NAME="StNo" NEXT_STATE_ID="4" EVENT_ID="203">
				<action ID="60" />
			</transition>
			<transition NAME="StYes" NEXT_STATE_ID="22" EVENT_ID="204">
				<action ID="8" />
			</transition>
		</state>
		<state NAME="move Point Full" ID="22">
			<!--  since the MouseMove Event is send by QT we don't have the information about the position of the point in the list -->
			<!--  we had it before, when we checked, if it was picked, or if it was selected -->
			<transition NAME="move point" NEXT_STATE_ID="22" EVENT_ID="530">
				<action ID="91" />
			</transition>
			<transition NAME="finish move" NEXT_STATE_ID="4" EVENT_ID="505">
				<action ID="42" />
			</transition>
			<transition NAME="Safety init" NEXT_STATE_ID="22" EVENT_ID="1">
				<action ID="8" />
			</transition>
		</state>
		<state NAME="checkn Delete" ID="30">
			<transition NAME="StNo" NEXT_STATE_ID="2" EVENT_ID="203">
				<action ID="100" />
			</transition>
			<transition NAME="StYes" NEXT_STATE_ID="1" EVENT_ID="204">
				<action ID="100" />
			</transition>
		</state>
		<state NAME="checkedPositionEventSmallerN" ID="40">
			<transition NAME="PositionEvent" NEXT_STATE_ID="2" EVENT_ID="204">
				<action ID="10" />
			</transition>
			<transition NAME="others" NEXT_STATE_ID="2" EVENT_ID="203">
				<action ID="0" />
			</transition>
		</state>
		<state NAME="checkedPositionEventGreaterN" ID="41">
			<transition NAME="PositionEvent" NEXT_STATE_ID="4" EVENT_ID="204">
				<action ID="10" />
			</transition>
			<transition NAME="others" NEXT_STATE_ID="2" EVENT_ID="203">
				<action ID="0" />
			</transition>
		</state>
	</stateMachine>
	
<!-- Behaviour of a Point. -->	

	<stateMachine NAME="pointinteraction">
		<state NAME="neutral" ID="0" START_STATE="TRUE">
			<transition NAME="setPoint" NEXT_STATE_ID="1" EVENT_ID="3">
	 			<action ID="10" />
			</transition>
			<transition NAME="checkpicked" NEXT_STATE_ID="2" EVENT_ID="1">
				 <action ID="30" />

			</transition>
		</state>
		<state NAME="selected" ID="1">
			<transition NAME="setPoint" NEXT_STATE_ID="1" EVENT_ID="3">
			 	<action ID="72" />
			 	<action ID="10" />
			</transition>
			<transition NAME="remove" NEXT_STATE_ID="0" EVENT_ID="12">
			 	<action ID="100" />
			</transition>
			<transition NAME="checkselectedpick" NEXT_STATE_ID="4" EVENT_ID="1">
			 	<action ID="30" />
			</transition>

		</state>
		<state NAME="checkpicked" ID="2">
			<transition NAME="StNo" NEXT_STATE_ID="0" EVENT_ID="1003">
				<action ID="0" />
			</transition>
			<transition NAME="StYes" NEXT_STATE_ID="1" EVENT_ID="1004">	
			 	<action ID="60" />
			</transition>
		</state>
		<state NAME="checkselectedpicked" ID="3">
			<transition NAME="StNoDeselected" NEXT_STATE_ID="0" EVENT_ID="1003">
				<action ID="0" />
			</transition>
			<transition NAME="StYesSelected" NEXT_STATE_ID="4" EVENT_ID="1004">
				<action ID="8" />
			</transition>
		</state>
		<state NAME="moves" ID="4">
			<transition NAME="mousemove" NEXT_STATE_ID="4" EVENT_ID="530">
				<action ID="91" />
			</transition>
			<transition NAME="finishmove" NEXT_STATE_ID="1" EVENT_ID="505">
				<action ID="42" />
			</transition>
		</state>
	</stateMachine>
<!-- Behaviour of a Line. -->	
	<stateMachine NAME="lineinteraction">
		<state NAME="start" ID="0" START_STATE="TRUE">
			<transition NAME="checkpick" NEXT_STATE_ID="2" EVENT_ID="1">
	 			<action ID="30" />
			</transition>
		</state>
		<state NAME="selected" ID="1">
			<transition NAME="remove" NEXT_STATE_ID="0" EVENT_ID="12">
			 	<action ID="101" />
			</transition>
			<transition NAME="checkselectedpick" NEXT_STATE_ID="3" EVENT_ID="1">
			 	<action ID="30" />
			</transition>
		</state>
		<state NAME="checkpick" ID="2">
			<transition NAME="StNo" NEXT_STATE_ID="0" EVENT_ID="1003">
				<action ID="0" />
			</transition>
			<transition NAME="StYes" NEXT_STATE_ID="1" EVENT_ID="1004">
				<action ID="65" />
			</transition>
		</state>
		<state NAME="checkselectedpicked" ID="3">
			<transition NAME="StNo" NEXT_STATE_ID="0" EVENT_ID="1003">
				<action ID="75" />
			</transition>
			<transition NAME="StYes" NEXT_STATE_ID="4" EVENT_ID="1004">
				<action ID="8" />
			</transition>
		</state>
		<state NAME="moves" ID="4">
			<transition NAME="mousemove" NEXT_STATE_ID="4" EVENT_ID="530">
				<action ID="92" />
			</transition>
			<transition NAME="finishmove" NEXT_STATE_ID="1" EVENT_ID="505">	
			 	<action ID="42" />
			</transition>
		</state>		
	</stateMachine>
<!-- Behaviour of a Polygon -->	
	<stateMachine NAME="polygoninteraction">
		<state NAME="start" ID="0" START_STATE="TRUE">
			<transition NAME="createPolygon" NEXT_STATE_ID="1" EVENT_ID="3">
	 			<action ID="10" />
			</transition>
			<transition NAME="checkpick" NEXT_STATE_ID="3" EVENT_ID="1">
				 <action ID="30" />
			</transition>
		</state>
		<state NAME="drawline" ID="1">
			<transition NAME="insertelement" NEXT_STATE_ID="1" EVENT_ID="3">
			 	<action ID="10" />
			 	<action ID="12" />
			</transition>
			<transition NAME="checkpickfinish" NEXT_STATE_ID="2" EVENT_ID="2">
				 <action ID="30" />
			</transition>
		</state>
		<state NAME="checkpickedpointforfinish" ID="2">
			<transition NAME="StNo" NEXT_STATE_ID="4" EVENT_ID="1003">
				<action ID="13" />
			</transition>
			<transition NAME="StYes" NEXT_STATE_ID="4" EVENT_ID="1004">	
			 	<action ID="40" />
			</transition>
		</state>
		<state NAME="checkpicked" ID="3">
			<transition NAME="StNo" NEXT_STATE_ID="0" EVENT_ID="1003">
				<action ID="0" />
			</transition>
			<transition NAME="StYes" NEXT_STATE_ID="4" EVENT_ID="1004">
				<action ID="65" />
				<action ID="6" />
			</transition>
		</state>
		<state NAME="selected" ID="4">
			<transition NAME="remove" NEXT_STATE_ID="0" EVENT_ID="12">
				<action ID="101" />
			</transition>
			<transition NAME="checkselectedpick" NEXT_STATE_ID="5" EVENT_ID="1">
				<action ID="30" />
			</transition>
		</state>
		<state NAME="checkselectedpicked" ID="5">
			<transition NAME="StNo" NEXT_STATE_ID="0" EVENT_ID="1003">
				<action ID="75" />
			</transition>
			<transition NAME="StYes" NEXT_STATE_ID="6" EVENT_ID="1004">
				<action ID="8" />
			</transition>
		</state>
		<state NAME="moves" ID="6">
			<transition NAME="mousemove" NEXT_STATE_ID="6" EVENT_ID="530">
				<action ID="92" />
			</transition>
			<transition NAME="finishmove" NEXT_STATE_ID="4" EVENT_ID="505">	
			 	<action ID="42" />
			</transition>
		</state>
	</stateMachine>
	<!-- affine interactions standard statemachine  -->
	<stateMachine NAME="AffineInteractions ctrl-drag">
		<state NAME="start" ID="0" START_STATE="TRUE">
			<transition NAME="leftButtonPress" NEXT_STATE_ID="12" EVENT_ID="5"> <!-- CTRL+LBM_Down ==> SeCHECKELEMENT  -->
				<action ID="30" />
			</transition>
			<transition NAME="leftButtonPress" NEXT_STATE_ID="12" EVENT_ID="540"> <!-- SHIFT+CTRL+LBM_Down ==> SeADD  -->
				<action ID="11" />
			</transition>
			<transition NAME="middleButtonPress" NEXT_STATE_ID="14" EVENT_ID="6"> <!-- CTRL+MBM_Down ==> SeCHECKELEMENT  -->
				<action ID="30" />
			</transition>
			<transition NAME="rightButtonPress" NEXT_STATE_ID="13" EVENT_ID="7"> <!-- CTRL+RBM_Down ==> SeCHECKELEMENT  -->
				<action ID="30" />
			</transition>
		</state>
		<state NAME="picked guard Translate" ID="12">
			<transition NAME="yes" NEXT_STATE_ID="2" EVENT_ID="204"> <!-- StYES -->
				<action ID="1006" />
				<action ID="1000" />
			</transition>
			<transition NAME="no" NEXT_STATE_ID="0" EVENT_ID="203"> <!-- StNO -->
				<action ID="0" />
			</transition>
		</state>
		<state NAME="picked guard Scale" ID="13">
			<transition NAME="yes" NEXT_STATE_ID="3" EVENT_ID="204"> <!-- StYES -->
				<action ID="1006" />
				<action ID="1002" />
			</transition>
			<transition NAME="no" NEXT_STATE_ID="0" EVENT_ID="203"> <!-- StNO -->
				<action ID="0" />
			</transition>
		</state>
		<state NAME="picked guard Rotate" ID="14">
			<transition NAME="yes" NEXT_STATE_ID="4" EVENT_ID="204"> <!-- StYES -->
				<action ID="1006" />
				<action ID="1004" />
			</transition>
			<transition NAME="no" NEXT_STATE_ID="0" EVENT_ID="203"> <!-- StNO -->
				<action ID="0" />
			</transition>
		</state>
		<state NAME="translating" ID="2">
			<transition NAME="leftButtonMove" NEXT_STATE_ID="2" EVENT_ID="534"> <!-- CTRL+LBM_Move ==> SeTRANSLATE  -->
				<action ID="1001" />
			</transition>
			<transition NAME="leftButtonRelease" NEXT_STATE_ID="0" EVENT_ID="505"> <!-- LBM_Release ==> SeTRANSLATE  -->
				<!--<action ID="1001" />-->
				<action ID="1007" />
			</transition>
			<transition NAME="leftButtonRelease" NEXT_STATE_ID="0" EVENT_ID="537"> <!-- CTRL+LBM_Release ==> SeTRANSLATE  -->
				<!--<action ID="1001" />-->
				<action ID="1007" />
			</transition>
		</state>
		<state NAME="rotating" ID="4">
			<transition NAME="middleButtonMove" NEXT_STATE_ID="4" EVENT_ID="536"> <!-- CTRL+MBM_Move ==> SeROTATE  -->
				<action ID="1005" />
			</transition>
			<transition NAME="middleButtonRelease" NEXT_STATE_ID="0" EVENT_ID="506"> <!-- MBM_Release ==> SeROTATE  -->
				<!--<action ID="1005" />-->
				<action ID="1007" />
			</transition>
			<transition NAME="middleButtonRelease" NEXT_STATE_ID="0" EVENT_ID="539"> <!-- CTRL+MBM_Release ==> SeROTATE  -->
				<!--<action ID="1005" />-->
				<action ID="1007" />
			</transition>
		</state>
		<state NAME="scaling" ID="3">
			<transition NAME="rightButtonMove" NEXT_STATE_ID="3" EVENT_ID="535"> <!-- CTRL+RBM_Move ==> SeSCALE  -->
				<action ID="1003" />
			</transition>
			<transition NAME="rightButtonRelease" NEXT_STATE_ID="0" EVENT_ID="507"> <!-- RBM_Release ==> SeSCALE  -->
				<!--<action ID="1003" />-->
				<action ID="1007" />
			</transition>
			<transition NAME="rightButtonRelease" NEXT_STATE_ID="0" EVENT_ID="538"> <!-- CTRL+RBM_Release ==> SeSCALE  -->
				<!--<action ID="1003" />-->
				<action ID="1007" />
			</transition>
		</state>
	</stateMachine>
	
<!-- Behaviour of a HirachicalInteractor -->	
	<stateMachine NAME="HirachicalInteractor">
		<state NAME="notSelected" ID="0" START_STATE="TRUE">
			<transition NAME="leftButtonPress" NEXT_STATE_ID="1" EVENT_ID="1"> 
				<action ID="1101" />
			</transition>		
		</state>
		<state NAME="selected" ID="1">
			<transition NAME="checkSubSelected" NEXT_STATE_ID="2" EVENT_ID="1"> 
				<action ID="38" >
					<floatParam Name="threshold" Value="0.5" />
				</action>
			</transition>
			<transition NAME="Esc" NEXT_STATE_ID="0" EVENT_ID="13"> 
				<action ID="1100" />
			</transition>			
		</state>
		<state NAME="checkSubSelected" ID="2">
			<transition NAME="Yes" NEXT_STATE_ID="3" EVENT_ID="204"> <!-- necessary transition of the state subSelected -->	
				<action ID="1102" />	<!-- the event will produced from the hirachical interactor -->				
			</transition>		
			<transition NAME="No" NEXT_STATE_ID="1" EVENT_ID="203"> <!-- necessary transition of the state subSelected -->					
			</transition>			<!-- the event will produced from the hirachical interactor -->
		</state>
		<state NAME="subSelected" ID="3">
			<transition NAME="SubInteractorDeselect" NEXT_STATE_ID="1" EVENT_ID="1020"> <!-- necessary transition of the state subSelected -->	
				<action ID="1101" />												  <!-- the event will produced from the hirachical interactor -->
			</transition>		
			<transition NAME="Esc" NEXT_STATE_ID="1" EVENT_ID="13"> 
				<action ID="1101" />
			</transition>		
		</state>
	</stateMachine>	
<!-- end of the HirachicalInteractor -->		
	
	<stateMachine NAME="AffineInteractions ctrl-drag_marcus">
		<state NAME="start" ID="0" START_STATE="TRUE">
			<transition NAME="leftButtonPress" NEXT_STATE_ID="12" EVENT_ID="1"> <!-- 30 = SeCHECKELEMENT  -->
				<action ID="30" />
			</transition>
			<transition NAME="rightButtonPress" NEXT_STATE_ID="13" EVENT_ID="2"> <!-- 1002 = SeSCALESTART  -->
				<action ID="30" />
			</transition>
			<transition NAME="middleButtonPress" NEXT_STATE_ID="14" EVENT_ID="4"> <!-- 1004 = SeROTATESTART  -->
				<action ID="30" />
			</transition>
		</state>
		<state NAME="picked guard Translate" ID="12">
			<transition NAME="yes" NEXT_STATE_ID="2" EVENT_ID="204"> <!-- StYES -->
				<action ID="1000" />
			</transition>
			<transition NAME="no" NEXT_STATE_ID="0" EVENT_ID="203"> <!-- StNO -->
				<action ID="0" />
			</transition>
		</state>
		<state NAME="picked guard Scale" ID="13">
			<transition NAME="yes" NEXT_STATE_ID="3" EVENT_ID="204"> <!-- StYES -->
				<action ID="1002" />
			</transition>
			<transition NAME="no" NEXT_STATE_ID="0" EVENT_ID="203"> <!-- StNO -->
				<action ID="0" />
			</transition>
		</state>
		<state NAME="picked guard Rotate" ID="14">
			<transition NAME="yes" NEXT_STATE_ID="4" EVENT_ID="204"> <!-- StYES -->
				<action ID="1004" />
			</transition>
			<transition NAME="no" NEXT_STATE_ID="0" EVENT_ID="203"> <!-- StNO -->
				<action ID="0" />
			</transition>
		</state>
		<state NAME="translating" ID="2">
			<transition NAME="leftButtonMove" NEXT_STATE_ID="2" EVENT_ID="530"> <!-- 1000 = SeTRANSLATE  -->
				<action ID="1001" />
			</transition>
			<transition NAME="leftButtonRelease" NEXT_STATE_ID="0" EVENT_ID="505"> <!-- 1000 = SeTRANSLATE  -->
				<action ID="1001" />
			</transition>
			<transition NAME="leftButtonRelease" NEXT_STATE_ID="0" EVENT_ID="537"> <!-- CTRL+LBM_Release ==> SeTRANSLATE  -->
				<action ID="1001" />
			</transition>
		</state>
		<state NAME="scaling" ID="3">
			<transition NAME="rightButtonMove" NEXT_STATE_ID="3" EVENT_ID="531"> <!-- 1003 = SeSCALE  -->
				<action ID="1003" />
			</transition>
			<transition NAME="rightButtonRelease" NEXT_STATE_ID="0" EVENT_ID="507"> <!-- 1003 = SeSCALE  -->
				<action ID="1003" />
			</transition>
			<transition NAME="rightButtonRelease" NEXT_STATE_ID="0" EVENT_ID="538"> <!-- CTRL+RBM_Release ==> SeSCALE  -->
				<action ID="1003" />
			</transition>
		</state>
		<state NAME="rotating" ID="4">
			<transition NAME="middleButtonMove" NEXT_STATE_ID="4" EVENT_ID="533"> <!-- 1005 = SeROTATE  -->
				<action ID="1005" />
			</transition>
			<transition NAME="middleButtonRelease" NEXT_STATE_ID="0" EVENT_ID="506"> <!-- 1005 = SeROTATE  -->
				<action ID="1005" />
			</transition>
			<transition NAME="middleButtonRelease" NEXT_STATE_ID="0" EVENT_ID="539"> <!-- 1005 = SeROTATE  -->
				<action ID="1005" />
			</transition>
		</state>
	</stateMachine>
	<stateMachine NAME="AffineInteractions click to select">
		<state NAME="start" ID="1" START_STATE="TRUE">
			<transition NAME="leftButtonPress" NEXT_STATE_ID="2" EVENT_ID="1"> <!-- 30 = SeCHECKELEMENT  -->
				<action ID="30" />
			</transition>
		</state>
		<state NAME="object selected check" ID="2">
			<transition NAME="yes" NEXT_STATE_ID="10" EVENT_ID="204"> <!-- StYES -->
				<action ID="0" />
			</transition>
			<transition NAME="no" NEXT_STATE_ID="1" EVENT_ID="203"> <!-- StNO -->
				<action ID="0" />
			</transition>
		</state>
		<state NAME="neutral" ID="10">
			<transition NAME="leftButtonPress" NEXT_STATE_ID="20" EVENT_ID="1"> <!-- 30 = SeCHECKELEMENT  -->
				<action ID="30" />
			</transition>
			<transition NAME="rightButtonPress" NEXT_STATE_ID="31" EVENT_ID="2"> <!-- 1002 = SeSCALESTART  -->
				<action ID="1002" />
			</transition>
			<transition NAME="middleButtonPress" NEXT_STATE_ID="41" EVENT_ID="4"> <!-- 1004 = SeROTATESTART  -->
				<action ID="1004" />
			</transition>
		</state>
		<state NAME="object deselect check" ID="20">
			<transition NAME="yes" NEXT_STATE_ID="21" EVENT_ID="204"> <!-- 1000 = SeTRANSLATESTART -->
				<action ID="1000" />
			</transition>
			<transition NAME="no" NEXT_STATE_ID="1" EVENT_ID="203"> <!-- StNO -->
				<action ID="0" />
			</transition>
		</state>
		<state NAME="translating" ID="21">
			<transition NAME="leftButtonMove" NEXT_STATE_ID="21" EVENT_ID="530"> <!-- 1001 = SeTRANSLATE  -->
				<action ID="1000" />
			</transition>
			<transition NAME="leftButtonRelease" NEXT_STATE_ID="10" EVENT_ID="505"> <!-- 0 = no sideeffect  -->
				<action ID="0" />
			</transition>
		</state>
		<state NAME="scaling" ID="31">
			<transition NAME="rightButtonMove" NEXT_STATE_ID="31" EVENT_ID="531"> <!-- 1003 = SeSCALE  -->
				<action ID="1003" />
			</transition>
			<transition NAME="rightButtonRelease" NEXT_STATE_ID="10" EVENT_ID="507"> <!-- 0 = no sideeffect  -->
				<action ID="0" />
			</transition>
		</state>
		<state NAME="rotating" ID="41">
			<transition NAME="middleButtonMove" NEXT_STATE_ID="41" EVENT_ID="533"> <!-- 1005 = SeROTATE  -->
				<action ID="1005" />
			</transition>
			<transition NAME="middleButtonRelease" NEXT_STATE_ID="10" EVENT_ID="506"> <!-- 0 = no sideeffect  -->
				<action ID="0" />
			</transition>
		</state>
	</stateMachine>
	<!-- -->
	<!-- -->
	<!-- EventDescriptions -->
	<events STYLE="Powerpoint">
		<!-- left MouseButton -->
		<event NAME="left MouseBN" ID="1" TYPE="Type_MouseButtonPress" BUTTON="BS_LeftButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<!-- right MouseButton -->
		<event NAME="right MouseBN" ID="2" TYPE="Type_MouseButtonPress" BUTTON="BS_RightButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<!-- Shift + left MouseButton -->
		<event NAME="left MouseBN + Shift" ID="3" TYPE="Type_MouseButtonPress" BUTTON="BS_LeftButton" BUTTONSTATE="0x0100" KEY="Key_none" />
		<!-- middle MouseButton -->
		<event NAME="middle MouseBN" ID="4" TYPE="Type_MouseButtonPress" BUTTON="BS_MidButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<!-- Strg + N -->
		<event NAME="Strg + N" ID="10" TYPE="Type_KeyPress" BUTTON="BS_NoButton" BUTTONSTATE="0x0200" KEY="Key_N" />
		<!-- Strg + E -->
		<event NAME="Strg + E" ID="11" TYPE="Type_KeyPress" BUTTON="BS_NoButton" BUTTONSTATE="0x0200" KEY="Key_E" />
		<!-- Delete -->
		<event NAME="Delete" ID="12" TYPE="Type_KeyPress" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_Delete" />
		<!-- Esc -->
		<event NAME="Escape" ID="13" TYPE="Type_KeyPress" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_Escape" />		
		<!-- leftMouseButtonRelease -->
		<event NAME="leftMouseRelease" ID="505" TYPE="Type_MouseButtonRelease" BUTTON="BS_LeftButton" BUTTONSTATE="0x0001" KEY="Key_none" />
		<!-- MiddleMouseButtonRelease -->
		<event NAME="MiddleMouseRelease" ID="506" TYPE="Type_MouseButtonRelease" BUTTON="BS_MidButton" BUTTONSTATE="0x0004" KEY="Key_none" />
		<!-- RightMouseButtonRelease -->
		<event NAME="RightMouseRelease" ID="507" TYPE="Type_MouseButtonRelease" BUTTON="BS_RightButton" BUTTONSTATE="0x0002" KEY="Key_none" />
		<!-- Shift + left MouseButtonRelease -->
		<event NAME="left MouseBNRelease+Shift" ID="508" TYPE="Type_MouseButtonRelease" BUTTON="BS_LeftButton" BUTTONSTATE="0x0101" KEY="Key_none" />
		<!-- MouseMove -->
		<event NAME="MouseMove" ID="520" TYPE="Type_MouseMove" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<!-- left MouseButton and MouseMove -->
		<event NAME="leftBN+MouseMove" ID="530" TYPE="Type_MouseMove" BUTTON="BS_NoButton" BUTTONSTATE="0x0001" KEY="Key_none" />
		<!-- right MouseButton and MouseMove -->
		<event NAME="rightBN+MouseMove" ID="531" TYPE="Type_MouseMove" BUTTON="BS_NoButton" BUTTONSTATE="0x0002" KEY="Key_none" />
		<!-- middle MouseButton and MouseMove -->
		<event NAME="middleBN+MouseMove" ID="533" TYPE="Type_MouseMove" BUTTON="BS_NoButton" BUTTONSTATE="0x0004" KEY="Key_none" />
		<!-- CTRL + left MouseButton and MouseMove -->
		<event NAME="CTRL+leftBN+MouseMove" ID="534" TYPE="Type_MouseMove" BUTTON="BS_NoButton" BUTTONSTATE="0x0201" KEY="Key_none" />
		<!-- CTRL + right MouseButton and MouseMove -->
		<event NAME="CTRL+rightBN+MouseMove" ID="535" TYPE="Type_MouseMove" BUTTON="BS_NoButton" BUTTONSTATE="0x0202" KEY="Key_none" />
		<!-- CTRL + middle MouseButton and MouseMove -->
		<event NAME="CTRL+middleBN+MouseMove" ID="536" TYPE="Type_MouseMove" BUTTON="BS_NoButton" BUTTONSTATE="0x0204" KEY="Key_none" />
		<!-- Ctrl + left MouseButton -->
		<event NAME="CTRL+leftBN" ID="5" TYPE="Type_MouseButtonPress" BUTTON="BS_LeftButton" BUTTONSTATE="0x0200" KEY="Key_none" />
		<!-- Ctrl + middle MouseButton -->
		<event NAME="CTRL+middleBN" ID="6" TYPE="Type_MouseButtonPress" BUTTON="BS_MidButton" BUTTONSTATE="0x0200" KEY="Key_none" />
		<!-- Ctrl + right MouseButton -->
		<event NAME="CTRL+rightBN" ID="7" TYPE="Type_MouseButtonPress" BUTTON="BS_RightButton" BUTTONSTATE="0x0200" KEY="Key_none" />
		<!-- CTRL + left MouseButtonRelease -->
		<event NAME="CTRL+leftBNRelease" ID="537" TYPE="Type_MouseButtonRelease" BUTTON="BS_LeftButton" BUTTONSTATE="0x0201" KEY="Key_none" />
		<!-- CTRL + right MouseButtonRelease -->
		<event NAME="CTRL+rightBNRelease" ID="538" TYPE="Type_MouseButtonRelease" BUTTON="BS_RightButton" BUTTONSTATE="0x0202" KEY="Key_none" />
		<!-- CTRL + middle MouseButtonRelease -->
		<event NAME="CTRL+middleBNRelease" ID="539" TYPE="Type_MouseButtonRelease" BUTTON="BS_MidButton" BUTTONSTATE="0x0204" KEY="Key_none" />
		<!-- Shift + Ctrl + left MouseButton -->
		<event NAME="SHIFT+CTRL+middleBN" ID="540" TYPE="Type_MouseButtonPress" BUTTON="BS_LeftButton" BUTTONSTATE="0x0300" KEY="Key_none" />
		<!-- ALT + left MouseButton -->
		<event NAME="ALT+leftBN" ID="600" TYPE="Type_MouseButtonPress" BUTTON="BS_LeftButton" BUTTONSTATE="0x0400" KEY="Key_none" />
		<!-- ALT + left MouseButton and MouseMove -->
		<event NAME="ALT+leftBN+MouseMove" ID="610" TYPE="Type_MouseMove" BUTTON="BS_NoButton" BUTTONSTATE="0x0401" KEY="Key_none" />
		<!-- ALT + leftMouseButtonRelease -->
		<event NAME="ALT+leftMouseRelease" ID="620" TYPE="Type_MouseButtonRelease" BUTTON="BS_LeftButton" BUTTONSTATE="0x0401" KEY="Key_none" />
		
		<!-- -->
		<!-- -->
		<!-- own thrown events -->
		<!-- *****Important*****: has to be set in mitkInteractionConst.h-->
		<event NAME="new" ID="1000" TYPE="Type_User" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<event NAME="old" ID="1001" TYPE="Type_User" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<event NAME="finished" ID="1002" TYPE="Type_User" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<event NAME="StNo" ID="1003" TYPE="Type_User" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<event NAME="StYES" ID="1004" TYPE="Type_User" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<event NAME="same" ID="1005" TYPE="Type_User" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<event NAME="no	and last object" ID="1006" TYPE="Type_User" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<event NAME="no and not last object" ID="1007" TYPE="Type_User" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<event NAME="last" ID="1008" TYPE="Type_User" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<event NAME="not last" ID="1009" TYPE="Type_User" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<!-- for n-PointRoi-->
		<event NAME="StSMALERNMINUS1 " ID="1010" TYPE="Type_User" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<event NAME="StLARGERNMINUS1" ID="1011" TYPE="Type_User" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<!-- -->
		<!-- -->
		<!-- Sonstiges -->
		<event NAME="PositionEvent" ID="1012" TYPE="Type_MouseButtonPress" BUTTON="BS_LeftButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<!-- DoubleClick <event NAME="PositionEvent"  		ID="510" TYPE="4" BUTTON="0x0001" BUTTONSTATE="0x0000" KEY="0xffff" />-->
		<!-- for external thrown Events-->
		<event NAME="clear" ID="1100" TYPE="Type_User" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_none" />
		<!-- Puncture Application -->
		<event NAME="print" ID="3001" TYPE="Type_Application" BUTTON="BS_NoButton" BUTTONSTATE="0x0000" KEY="Key_none" />
	</events>
</mitkInteraktionStates>
<!-- DOKUMENTATION -->
<!-- this is StateMachine.xml| includes Information about different StateMachines and Events. Used by EventMapper and StateMachineFactory-->
<!-- ***WARNING*** do not use any &, % and so on in NAME -->
<!-- -->
<!-- -->
<!-- FAQ -->
<!-- Question: the Application, that is loading this file doesn't act on the Interaction. Why? -->
<!-- The QXMLFileLoader probably isn't able to load the file due to an error.-->
<!-- Check the file for XML-Syntax like  "<" at beginning and "/>" at end -->